\ProvidesPackage{macros.sty}

%%%% Additional font macros
\makeatletter
%%%% light series
%% e.g., s:12
\DeclareRobustCommand\ltseries
  {\not@math@alphabet\ltseries\relax
   \fontseries\ltdefault\selectfont}
%% e.g., t:32
\newcommand{\ltdefault}{l}
%% e.g., v:19
\DeclareTextFontCommand{\textlt}{\ltseries}

% heavy(bold) series
\DeclareRobustCommand\hbseries
  {\not@math@alphabet\hbseries\relax
   \fontseries\hbdefault\selectfont}
%% e.g., t:32
\newcommand{\hbdefault}{hb}
%% e.g., v:19
\DeclareTextFontCommand{\texthb}{\hbseries}
\makeatother

\newcommand*{\isbn}{{\small\textsc{ISBN}}}

%%% for the Web-O-Mints fonts
\newcommand*{\wb}[2]{\fontsize{#1}{#2}\usefont{U}{webo}{xl}{n}}
%\renewcommand*{\wb}[2]{}%    probably kills Web-O-Mints (and some layouts?)
%%% for the Fontsite 500 fonts
\newcommand*{\FSfont}[1]{%
  \fontencoding{T1}\fontfamily{#1}\selectfont}
%\renewcommand*{\FSfont}[1]{}%    kills special font selections

\newcommand*{\labelit}[1]{\phantomsection\label{#1}}
\newcommand*{\refit}[1]{(graphic on page~\pageref{#1})}

\chapterstyle{dash}\renewcommand*{\chaptitlefont}{\normalfont\itshape\LARGE}
\setlength{\beforechapskip}{2\onelineskip}
\setsecheadstyle{\normalfont\Large\raggedright}
\makeindex
\renewcommand*{\indexname}{Index of Designers}
\makeatletter
\newcommand*{\boxminipage}{%
  \@ifnextchar [%]
    \@ibxminipage
    {\@iiibxminipage c\relax[s]}}
\def\@ibxminipage[#1]{%
  \@ifnextchar [%]
    {\@iibxminipage{#1}}%
    {\@iiibxminipage{#1}\relax[s]}}
\def\@iibxminipage#1[#2]{%
  \@ifnextchar [%]
    {\@iiibxminipage{#1}{#2}}%
    {\@iiibxminipage{#1}{#2}[#1]}}
\let\@bxminto\@empty
\def\@iiibxminipage#1#2[#3]#4{%
  \ifx\relax#2\else
    \setlength\@tempdimb{#2}%
    \def\@bxminto{to\@tempdimb}%
  \fi
  \leavevmode
  \@pboxswfalse
  \if #1b\vbox
  \else
    \if #1t\vtop
    \else
      \ifmmode \vcenter
      \else \@pboxswtrue $\vcenter
      \fi
    \fi
  \fi
%  \@bxminto
  \bgroup%          outermost vbox
    \hsize #4
    \hrule\@height\fboxrule
    \hbox\bgroup%   inner hbox
      \vrule\@width\fboxrule \hskip\fboxsep 
        \vbox \@bxminto
        \bgroup% innermost vbox
        \vskip\fboxsep
        \advance\hsize -2\fboxrule \advance\hsize -2\fboxsep
        \textwidth\hsize \columnwidth\hsize
        \@parboxrestore
        \def\@mpfn{mpfootnote}\def\thempfn{\thempfootnote}\c@mpfootnote\z@
        \let\@footnotetext\@mpfootnotetext
        \let\@listdepth\@mplistdepth \@mplistdepth\z@
        \@minipagerestore\@minipagetrue
        \everypar{\global\@minipagefalse\everypar{}}}

\def\endboxminipage{%
  \par\vskip-\lastskip
  \ifvoid\@mpfootins\else
    \vskip\skip\@mpfootins\footnoterule\unvbox\@mpfootins\fi
  \vskip\fboxsep
  \egroup%    end innermost vbox
  \hskip\fboxsep \vrule\@width\fboxrule
  \egroup%    end hbox
  \hrule\@height\fboxrule
  \egroup%    end outermost vbox
  \if@pboxsw $\fi}
\makeatother

\DeclareRobustCommand{\cs}[1]{\texttt{\char`\\#1}}
\newlength{\tpheight}\setlength{\tpheight}{0.9\textheight}
\newlength{\txtheight}\setlength{\txtheight}{0.9\tpheight}
\newlength{\tpwidth}\setlength{\tpwidth}{0.9\textwidth}
\newlength{\txtwidth}\setlength{\txtwidth}{0.9\tpwidth}
\newlength{\drop}

\newenvironment{showtitle}{%
  \begin{boxminipage}[c][\tpheight]{\tpwidth}
  \centering\begin{vplace}\begin{minipage}[c][\txtheight]{\txtwidth}}%
{\end{minipage}\end{vplace}\end{boxminipage}}

\definecolor{Dark}{gray}{.2}
\definecolor{MedDark}{gray}{.4}
\definecolor{Medium}{gray}{.6}
\definecolor{Light}{gray}{.8}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% The Family Receipt Book
\makeatletter
\newlength{\rbtextwidth}\setlength{\rbtextwidth}{289pt}
\newlength{\rbtextheight}\setlength{\rbtextheight}{490pt}

\newcommand*{\covertext}{%
{\normalsize THE NEW\par}
{\huge FAMILY RECEIPT BOOK\par}
{\tiny CONTAINING A LARGE COLLECTION OF\par}
{\footnotesize HIGHLY ESTIMATED RECEIPTS IN A VARIETY \par}
{\footnotesize OF BRANCHES, NAMELY:\par}
{\huge BREWING,\par}
{\Large MAKING AND PRESERVING BRITISH WINES,\par}
{\huge DYING,\par}
{\large RURAL AND DOMESTIC ECONOMY,\par}
{\footnotesize SELECTED FROM EXPERIENCED \& APPROVED RECEIPTS,\par}
{\normalsize\textsf{FOR THE USE OF PUBLICANS}\par}
{\footnotesize AND HOUSEKEEPERS IN GENERAL,\par}
{\tiny A GREAT MANY OF WHICH WERE NEVER BEFORE PUBLISHED.\par}
\rule{0.15\rbtextwidth}{0.4pt}\par
{\Large BY G.~MILLSWOOD.\par}
\rule{0.75\rbtextwidth}{0.4pt}\par
{\footnotesize \textsf{PRICE ONE SHILLING}\par}
\rule{0.5\rbtextwidth}{0.4pt}\par
{\footnotesize DERBY: PRINTED AND SOLD BY G.~WILKINS AND SON,\par}
{\footnotesize QUEEN STREET.\par}}

\newlength{\sepframe}
\newlength{\framex}
\newlength{\framey}
\setlength{\sepframe}{2.4pt}
\setlength{\framex}{\rbtextwidth}
\addtolength{\framex}{2\sepframe}
\setlength{\framey}{\rbtextheight}
\addtolength{\framey}{2\sepframe}
\newcommand*{\titleRB}{%
\FSfont{5cu}%  Century Old Style
  \begin{picture}(\strip@pt\rbtextwidth,\strip@pt\rbtextheight)%
    \thinlines
    \put(0,0){\framebox(\strip@pt\rbtextwidth,\strip@pt\rbtextheight){%
\begin{minipage}{\rbtextwidth}
\centering
\setlength{\parskip}{0.67\baselineskip}
\covertext
\end{minipage}
}}%
    \put(-\strip@pt\sepframe,-\strip@pt\sepframe)%
             {\framebox(\strip@pt\framex,\strip@pt\framey){}}%
  \end{picture}}

\makeatother
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


% %%% textblock dimensions
% \newlength{\rbtextwidth}\setlength{\rbtextwidth}{289pt}
% \newlength{\rbtextheight}\setlength{\rbtextheight}{490pt}
% %%% title page text --- one line per ‘paragraph’
% \newcommand*{\covertext}{%
% {\normalsize THE NEW\par}
% {\huge FAMILY RECEIPT BOOK\par}
% {\tiny CONTAINING A LARGE COLLECTION OF\par}
% {\footnotesize HIGHLY ESTIMATED RECEIPTS IN A VARIETY \par}
% {\footnotesize OF BRANCHES, NAMELY:\par}
% {\huge BREWING,\par}
% {\Large MAKING AND PRESERVING BRITISH WINES,\par}
% {\huge DYING,\par}
% {\large RURAL AND DOMESTIC ECONOMY,\par}
% {\footnotesize SELECTED FROM EXPERIENCED \&
% APPROVED RECEIPTS,\par}
% {\normalsize\textsf{FOR THE USE OF PUBLICANS}\par}
% {\footnotesize AND HOUSEKEEPERS IN GENERAL,\par}
% {\tiny A GREAT MANY OF WHICH WERE NEVER BEFORE PUBLISHED.\par}
% \rule{0.15\rbtextwidth}{0.4pt}\par
% {\Large BY G.~MILLSWOOD.\par}
% \rule{0.75\rbtextwidth}{0.4pt}\par
% {\footnotesize \textsf{PRICE ONE SHILLING}\par}
% \rule{0.5\rbtextwidth}{0.4pt}\par
% {\footnotesize DERBY: PRINTED AND SOLD BY G.~WILKINS
% AND SON,\par}
% {\footnotesize QUEEN STREET.\par}}
% %% set up for the double frame
% \newlength{\sepframe}
% \newlength{\framex}
% \newlength{\framey}
% \setlength{\sepframe}{2.4pt}
% \setlength{\framex}{\rbtextwidth}
% \addtolength{\framex}{2\sepframe}
% \setlength{\framey}{\rbtextheight}
% \addtolength{\framey}{2\sepframe}
% %% use a picture for the framed text
% \makeatletter
% \newcommand*{\titleRB}{%
% \begin{picture}(\strip@pt\rbtextwidth,\strip@pt\rbtextheight)%
% \thinlines
% \put(0,0){\framebox(\strip@pt\rbtextwidth,%
% \strip@pt\rbtextheight){%
% \begin{minipage}{\rbtextwidth}
% \centering
% \setlength{\parskip}{0.67\baselineskip}
% \covertext
% \end{minipage}
% }}%
% \put(-\strip@pt\sepframe,-\strip@pt\sepframe)%
% {\framebox(\strip@pt\framex,\strip@pt\framey){}}%
% \end{picture}}
% \makeatother